#!/usr/bin/env bash
set -euo pipefail
# shellcheck source-path=SCRIPTDIR
source "$(dirname "$0")/assert.sh"

export MISE_EXPERIMENTAL=1

cat <<EOF >.sdkmanrc
java=17.0.2
EOF
mise i java
assert_contains "mise x java -- java -version 2>&1" "openjdk version \"17.0.2\""
rm .sdkmanrc

cat <<EOF >.java-version
17.0.2
EOF
assert_contains "mise x java -- java -version 2>&1" "openjdk version \"17.0.2\""
rm .java-version

if [ "${TEST_ALL:-}" != 1 ]; then
  exit
fi

mise i java@corretto-8
