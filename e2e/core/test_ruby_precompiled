#!/usr/bin/env bash

# Test precompiled Ruby binaries from spinel-coop/rv-ruby
# Precompiled requires BOTH experimental=true AND compile=false
export MISE_RUBY_COMPILE=0

# Install precompiled Ruby 3.3.0
assert_contains "mise use ruby@3.3.0 2>&1" "ruby@3.3.0"
assert_contains "mise x -- ruby --version" "ruby 3.3.0"

# Verify the installation works
assert_succeed "mise x -- gem --version"

# Clean up
rm mise.toml
mise rm ruby@3.3.0
