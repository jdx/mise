#!/usr/bin/env bash

# Test precompiled Ruby binaries from jdx/ruby
# With experimental=true, precompiled is tried by default (falls back to compile if unavailable)
export MISE_EXPERIMENTAL=1

# Install precompiled Ruby 3.4.1
assert_contains "mise use ruby@3.4.1 2>&1" "ruby@3.4.1"
assert_contains "mise x -- ruby --version" "ruby 3.4.1"

# Verify the installation works
assert_succeed "mise x -- gem --version"

# Clean up
rm mise.toml
mise rm ruby@3.4.1
