#!/usr/bin/env bash

cat <<EOF >mise.toml
[settings]
experimental = true
[tools]
dummy = 'latest'
[hooks]
preinstall = 'echo PREINSTALL'
EOF

assert_contains "mise i dummy 2>&1" "PREINSTALL"
assert_not_contains "mise --no-hooks i dummy 2>&1" "PREINSTALL"

assert_not_contains "MISE_NO_HOOKS=1 mise --no-hooks i dummy 2>&1" "PREINSTALL"

cat <<EOF >mise.toml
[settings]
experimental = true
no_hooks = true
[tools]
dummy = 'latest'
[hooks]
preinstall = 'echo PREINSTALL'
EOF

assert_not_contains "mise i dummy 2>&1" "PREINSTALL"
