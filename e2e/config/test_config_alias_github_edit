#!/usr/bin/env bash

if [[ "$(uname)" == "Darwin" ]]; then
  echo "Skipping test_config_alias_github_edit on macOS (no macOS asset available)"
  exit 0
fi

cat <<EOF >mise.toml
[tools.test-edit]
version = "1.2.0"

[tools.test-edit.platforms]
linux-aarch64 = { asset_pattern = "edit-1.2.0-aarch64-linux-gnu.tar.zst" }
windows-aarch64 = { asset_pattern = "edit-1.2.0-aarch64-windows.zip" }
linux-x64 = { asset_pattern = "edit-1.2.0-x86_64-linux-gnu.tar.zst" }
windows-x64 = { asset_pattern = "edit-1.2.0-x86_64-windows.zip" }

[alias]
test-edit = "github:microsoft/edit"
EOF
assert "mise install test-edit"

# Test that the alias works and test-edit command can be executed
assert_contains "mise x -- edit --version" "edit version"
